<html>
    <head>
        <style>
            body {
                font-size: 40px;
            }
            #root {
                display: block;
                width: 100%;
                height: 100%;
            }
            #root iframe {
                border: none;
            }
        </style>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="root">&nbsp;</div>
    </body>
    <script type="application/javascript">
      $(document).ready(function(){
        function start() {
          $.ajax({
            type: "GET",
            url: "http://localhost:9990/provide",
            async: false,
            success: function(result) {
              if (typeof result['src'] !== 'undefined') {
                console.log('received', result);
                var source = document.createElement('source');
                source.src = result['src'];
                source.type = 'video/mp4';

                var video = document.createElement("video");
                video.style.width = "100%";
                video.style.height = "100%";
                video.autoplay = true;
                video.onended = function() {
                  console.log('video ended');
                  $('#root').html('');
                  start();
                };

                video.appendChild(source);
                $('#root').html(video);
              } else {
                setTimeout(start, 2000);
              }
            },
            error: function() {
              setTimeout(start, 2000);
            }
          });
        }

        start();

      });
    </script>
</html>